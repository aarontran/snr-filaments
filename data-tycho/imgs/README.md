README
======

Converted over from my notes on poster figures (for NASA intern session).
Here I store images of Tycho (single band or RGB) and the relevant
parameters/experimentation used to generate them.

NASA poster figures
-------------------

Parameters used to generate poster figures (`tycho_*.tiff`) (2014 July 29)

### `tycho_1.7-2.5kev.tiff`

    pset merge_obs infiles=10093/,10094/,10095/,10096/,10097/,10902/,10903/,10904/,10906/
    pset merge_obs outroot=test/thermal
    pset merge_obs bands=1.7:2.5:2.1
    pset merge_obs binsize=1

Started at 00:54 (am).  Would be more efficient to split reproject/stack, but
I don't anticipate running `merge_obs` again for Tycho data.
Finished ~01:29.

Colormap: bb, scale: square root, scale limits: 3e-08, 1.3e-06
Crop: (ra, dec) = (6.324, 64.143) (degrees), 0.165 degrees square.
File/Export to .tiff

### `tycho_rgb.tiff`

My default setting is nice, but a little over exposed on the northwest.
Regions: use regions-4-img.reg (yellow color + width=2)... + region labels (times, fontsize 16, white)
Here are the new parameters I'm using:

0.7-1 keV limis: 2e-8 5e-7
1-2 keV limits: 2e-8 5e-7
2-7 keV limits: 2e-8 3e-7 (deliberately trying to bring out the thin rims)
with asinh scaling
Crop: (ra, dec) = (6.324, 64.143) (degrees), 0.165 degrees square.

To account for poster scaling: multiply fontsizes by 2 (fontsize=32), set region widths = 3.
NEW scalebar: width=4 line of approx 2.00 arcminutes.  2' fontsize=48
Set frame parameters: 1208 x 1207 to match other images

Large RGB image, round two
Settings from Nina's Tycho image (as suggested by Brian), w/ linear scaling.

    Channel Scale       Contrast    Bias
    Red     0, 1.5e-06  2.02        0.27
    Green   0, 2.2e-06  2.2         0.256
    Blue    0, 1.4e-06  2.7         0.19

FINAL(?) settings -- had to twiddle scale params, units
seem to be a bit different (dunno why)

    Channel     Scale           Contrast    Bias
    Red         1e-8, 4e-7      2.02        0.27
    Green       7e-9, 5e-7      2.2         0.256
    Blue        7e-9, 3.3e-7    2.7         0.19

Apply same crop as before: 
(ra, dec) = (6.324, 64.143) (degrees), 0.165 degrees square
Export as tiff (no regions) and save image w/ 1208x1207 frame, zoom=1
(and no colorbar, as before, mind you)

### `tycho_4-7kev_cmap_b.tiff`

3rd revision... (2014 July 30) (this one was used on poster)
Contrast: 2.425
Bias: 0.24548
Smoothing: Gaussian smooth with radius 2
Colormap: b
Scaling: square root with limits 5e-9, 1.25e-7
Crop: as before (centered on 6.324, 64.143; square 0.165 deg)


Manuscript figures
==================

First iteration: 2014 October 31
Second iteration: 2014 December 15 (result is same, just cleaning up)

### `regs`

Folder stores region files being used for plots.  The regions are converted
from projections to boxes (see `code/regions/`).  Once convereted, they can be
copied to this folder (`data-tycho/imgs/regs/`) where annotations may be
adjusted by hand.

### `scalebar_2arcmin.reg`

Convenience scalebar for Tycho

### `ds9rgb.png` and `ds9rgb.fits`

Export these files from DS9 as follows:
1. Save RGB FITS image (from `ds9-tycho-rgb.sh`) to fits using menu
   command `File > Save as > RGB Image...`.
2. Export png (again, from `ds9-tycho-rgb.sh`) for APLpy to overlay on fits
   (don't use `Save as` for this).  Don't crop (?).

Using default rgb settings (from `data-tycho/ds9-tycho-rgb.sh`), haven't played
with contrast/bias/anything to make the image better.

### `tycho_aplpy.py`

Run script to generate RGB Tycho image + X-ray region overlay (`regions-6`).
Uses APLpy to get nice vector overlay, nicer annotations / ticks / tick labels,
better control of figure size, etc.

(note that a ton of hand-fiddling is still needed)

### Expected outputs

Images generated by hand in DS9:

    snr_4-7kev_poster_ds9.eps
    snr_radio_poster_ds9.eps

Images generated using APLpy:

    snr_manuscript.pdf
    snr_poster.pdf

AAS poster figures (2014 December 15)
=====================================

Figures for AAS poster + radio SNR image for paper.

Major problem: APLpy doesn't play nice with radio image + region overlay
After fiddling with this a while (and poking into the APLpy/astropy source
briefly) I decide it's not worth it.  DS9 export to eps will have to suffice.

Also: colors are mucked up converting from RGB to CYMK, hence the dull greens
in poster prints.  This is an issue for colormaps in both DS9 and APLpy
(matplotlib), and DS9 region/annotation colors.

### 4-7 keV image (similar to NASA poster)

Consider (inverted) greyscale for 4-7 keV (as suggested by Brian), but nicer in
color to match radio image too, I think.

### Scaling

Once figures are generated w/ script or DS9, just import to poster-making
program and use scalebar to rescale images.  Then, make your own scalebar and
overlay as desired.


    3rd revision... (2014 July 30)
    Contrast: 2.425
    Bias: 0.24548
    Smoothing: Gaussian smooth with radius 2
    Colormap: b
    Scaling: square root with limits 5e-9, 1.25e-7
    Crop: as before (centered on 6.324, 64.143; square 0.165 deg)


    f.recenter(ra2deg(0,25,17.5), 64.141, width=10.5/60, height=10.5/60)
    # J2000: 0.421527777 hrs = 6.3229 deg.
    f.recenter(5.623, 63.8641, width=10.5/60, height=10.5/60)
    # This is box square, 0.175 deg.)

    MAYBE generate 4-7 keV image in ds9, using bb colormap.
    To really match the radio image.

Procedure for DS9 image saving -- set zoom = 1, ensure image is enclosed by
window, in menus click `FILE > SAVE IMAGE > EPS...`.

Croppings / etc. chosen to all match, as best as possible.
All images have scalebars, so they can be rescaled in poster-making program
as they won't be correctly scaled here.

Regions don't render the same in DS9 / APLpy(matplotlib).  No wonder things
look kind of funky... (and, numbers aren't bolded correctly).

### RGB image (poster)

See `tycho_aplpy.py`, use `poster_fig_snr()`.

### RGB image (paper)

See `tycho_aplpy.py`, use `manuscript_fig_snr()`.

### 4-7 keV image (poster)

Use DS9

Scaling: square root; limits 5e-9, 8e-8
Constrast/bias: default
Colormap: bb
Crop: center (RA,DEC) = (6.3229 deg., 64.141 deg.); height/width = 0.175 deg.

Region: `scalebar_2arcmin.reg`

Save to `snr_4-7kev_poster_ds9.eps`

### Radio image (poster)

Use DS9.  Image settings same as in `data-tycho/ds9-tycho-radio.sh`.
Cropping same as for 4-7 keV (poster) image, because DS9 works in fk5 coords.
But, change height/width to 0.18 to accommodate larger radio rims, and move
scalebar out appropriately.

Scaling: linear; limits 0, 0.0037
Contrast/bias: 1.804 0.263
Colormap: bb
Crop: center (RA,DEC) = (6.3229 deg., 64.141 deg.); height/width = 0.175 deg.

Regions: `regions-6-VLA-box-img-poster.reg`
         `scalebar_2arcmin.reg`

Save to `snr_radio_poster_ds9.eps`


### Radio image (paper)

Use DS9.  Image settings same as in `data-tycho/ds9-tycho-radio.sh`.
Cropping similar to APLpy manuscript image, but twiddled to fit.

Scaling: linear; limits 0, 0.0037
Contrast/bias: 1.804 0.263
Colormap: bb
Crop: center (RA,DEC) = (6.3188 deg., 64.1405 deg.); height/width = 0.16667 deg.
(! not same as for poster)

Regions: `regions-6-VLA-box-img.reg`
         `scalebar_2arcmin.reg` (move this one to work)

Set frame view to 1199 x 1199 (crop out all white space).  Twiddle with it a
bit (try hitting zoom to fit, then zoom 1x) to make it center nicely.
Disable the colorbar.

Save to `snr_radio_manuscript_ds9.eps`


